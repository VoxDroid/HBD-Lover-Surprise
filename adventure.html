<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Enchanting Love Adventure!</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Roboto:wght@400;700&family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        * {
            font-family: 'Montserrat', sans-serif;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #ff3366;
            --secondary-color: #ff6b8b;
            --accent-color: #ffd700;
            --text-color: #333;
            --background-color: #fff0f5;
        }

        .drei {
            position: fixed;
            bottom: 10px;     
            right: 50px;      
            opacity: 0.5;     
            z-index: 1000;
            border: none;     
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: var(--background-color);
            overflow-x: hidden;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        .magical-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            background: linear-gradient(45deg, #ff3366, #ff6b8b, #ffd700);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        h1 {
            font-family: 'Pacifico', cursive;
            font-size: 3.5rem;
            color: var(--primary-color);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 2rem;
            animation: pulseTitle 2s infinite;
            text-align: center;
        }

        @keyframes pulseTitle {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .message {
            font-size: 1.5rem;
            max-width: 800px;
            text-align: center;
            color: var(--text-color);
            background-color: rgba(255, 255, 255, 0.8);
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
        }

        .show-message {
            opacity: 1;
            transform: translateY(0);
        }

        .choice-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .choice-button {
            font-size: 1.2rem;
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            background-color: var(--secondary-color);
            color: white;
            cursor: pointer;
            transition: transform 0.3s, background-color 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .choice-button:hover {
            transform: scale(1.05);
            background-color: var(--primary-color);
        }

        .choice-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px var(--accent-color);
        }

        .result {
            font-size: 1.2rem;
            text-align: center;
            margin-top: 2rem;
            padding: 1rem;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
        }

        .show-result {
            opacity: 1;
            transform: translateY(0);
        }

        .love-meter {
            width: 100%;
            max-width: 300px;
            height: 30px;
            background-color: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 1rem auto;
            position: relative;
        }

        .love-meter-fill {
            height: 100%;
            background: linear-gradient(to right, #ff3366, #ff6b8b);
            width: 0;
            transition: width 1s ease-in-out;
        }

        .love-meter-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.5s ease-in-out;
        }

        .emoji {
            font-size: 2rem;
            margin: 0 0.5rem;
        }

        #cupid {
            position: fixed;
            bottom: 20px;
            right: -100px;
            font-size: 4rem;
            transition: right 2s ease-in-out;
        }

        .fly-in {
            right: 20px !important;
        }

        .accessibility-controls {
            position: fixed;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
            z-index: 10;
        }

        .accessibility-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background-color 0.3s;
        }

        .accessibility-button:hover {
            background-color: var(--secondary-color);
        }

        .high-contrast {
            --primary-color: #000000;
            --secondary-color: #ffffff;
            --accent-color: #ffff00;
            --text-color: #000000;
            --background-color: #ffffff;
        }

        @media (prefers-reduced-motion: reduce) {
            .magical-background,
            h1,
            .choice-button:hover,
            #cupid {
                animation: none;
                transition: none;
            }
        }

        .floating-heart {
            position: fixed;
            font-size: 2rem;
            pointer-events: none;
            user-select: none;
            animation: float-up 4s ease-out;
            opacity: 0;
        }

        @keyframes float-up {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh);
                opacity: 0;
            }
        }

        #back-to-index {
            position: fixed;
            bottom: 20px;
            left: 20px;
            font-size: 1rem;
            padding: 0.5rem 1rem;
            background-color: rgba(255, 255, 255, 0.7);
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            z-index: 100;
        }

        #back-to-index:hover {
            background-color: rgba(255, 255, 255, 0.9);
        }

        #heart-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .prize-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .prize-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            text-align: center;
            max-width: 80%;
            max-height: 80%;
            overflow-y: auto;
            animation: prize-appear 1s ease-out;
            position: relative;
        }

        @keyframes prize-appear {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .prize-item {
            margin: 1rem 0;
            padding: 1rem;
            background-color: #fff0f5;
            border-radius: 0.5rem;
            transition: transform 0.3s;
        }

        .prize-item:hover {
            transform: scale(1.05);
        }

        #claim-prize {
            font-size: 1.5rem;
            padding: 1rem 2rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.3s, background-color 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            animation: pulse 1.5s infinite;
        }

        #claim-prize:hover {
            transform: scale(1.1);
            background-color: var(--secondary-color);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .close-prize {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
        }

        .download-prize {
            margin-top: 1rem;
            padding: 0.5rem 1rem;
            background-color: var(--accent-color);
            color: var(--text-color);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .download-prize:hover {
            background-color: #ffc700;
        }

        .romantic-element {
            position: absolute;
            opacity: 0.7;
            pointer-events: none;
        }

        #rose {
            bottom: 20px;
            left: 50px;
            font-size: 3rem;
            animation: sway 3s ease-in-out infinite;
        }

        #balloon {
            top: 50px;
            right: 100px;
            font-size: 4rem;
            animation: float 5s ease-in-out infinite;
        }

        @keyframes sway {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
    </style>
</head>
<body>
    <div class="magical-background"></div>
    <canvas id="heart-particles"></canvas>
    <div class="container">
        <h1 id="title">A quick, short survey.</h1>
        <div class="message" id="message">
            My dearest, welcome to our magical journey of love! I have some enchanting questions for you. 
            Are you ready to embark on this romantic adventure? <span class="emoji">❤️</span>
        </div>
        <div class="choice-container" id="choiceContainer"></div>
        <div class="result" id="result"></div>
        <div class="love-meter" id="loveMeter">
            <div class="love-meter-fill" id="loveMeterFill"></div>
            <div class="love-meter-text" id="loveMeterText">0%</div>
        </div>
    </div>
    
    <img class="drei" width="216" height="108">
    <div id="cupid">👼</div>
    <div class="accessibility-controls">
        <button class="accessibility-button" id="toggleContrast">Toggle High Contrast</button>
        <button class="accessibility-button" id="toggleMotion">Toggle Reduced Motion</button>
    </div>
    <button id="back-to-index">Back to Main Page</button>
    <div class="prize-container" id="prizeContainer">
        <div class="prize-content" id="prizeContent"></div>
    </div>
    <div class="romantic-element" id="rose">🌹</div>
    <div class="romantic-element" id="balloon">🎈</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const message = document.getElementById('message');
            const choiceContainer = document.getElementById('choiceContainer');
            const result = document.getElementById('result');
            const body = document.body;
            const toggleContrastButton = document.getElementById('toggleContrast');
            const toggleMotionButton = document.getElementById('toggleMotion');
            const loveMeter = document.getElementById('loveMeter');
            const loveMeterFill = document.getElementById('loveMeterFill');
            const loveMeterText = document.getElementById('loveMeterText');
            const cupid = document.getElementById('cupid');
            const backToIndex = document.getElementById('back-to-index');
            const prizeContainer = document.getElementById('prizeContainer');
            const prizeContent = document.getElementById('prizeContent');

            let loveLevel = 0;
            const maxLoveLevel = 100;
            let questionIndex = 0;

            const questions = [
                {
                    question: "If our love was a season, which one would it be?",
                    positive: "An eternal spring of blossoming romance!",
                    negative: "Winter... cold and distant."
                },
                {
                    question: "If you could compare our love to a celestial body, what would it be?",
                    positive: "A dazzling supernova, ever-expanding!",
                    negative: "A black hole... it sucks everything in."
                },
                {
                    question: "If our relationship was a piece of art, what style would it be?",
                    positive: "A masterpiece of Renaissance beauty!",
                    negative: "Abstract... confusing and hard to interpret."
                },
                {
                    question: "If our love story was turned into a movie, what genre would it be?",
                    positive: "An epic romance that spans lifetimes!",
                    negative: "A short comedy... very short."
                },
                {
                    question: "If you could describe our future in one word, what would it be?",
                    positive: "Extraordinary!",
                    negative: "Uncertain."
                },
                {
                    question: "If our love was a magical spell, what would it do?",
                    positive: "Create eternal happiness and joy!",
                    negative: "Make things disappear... like my patience."
                },
                {
                    question: "If our relationship was a journey, where would it lead?",
                    positive: "To a paradise of endless love and adventure!",
                    negative: "Probably lost in a maze."
                },
                {
                    question: "If our love had a flavor, what would it be?",
                    positive: "A perfect blend of sweet and passionate spice!",
                    negative: "Bland... like unseasoned tofu."
                },
                {
                    question: "If you could compare our bond to a force of nature, what would it be?",
                    positive: "A mighty, unstoppable tsunami of love!",
                    negative: "A gentle breeze... barely noticeable."
                },
                {
                    question: "If our love story was a book, what would the last chapter be titled?",
                    positive: "'Eternal Bliss: Our Never-Ending Love Story'",
                    negative: "'The End... Finally'"
                }
            ];

            const lovePhrases = [
                "Aww, that's sweet! But I know your love can shine brighter!",
                "The flames of passion are growing! Keep fanning them!",
                "Wow, your love is blooming beautifully! Can it reach full bloom?",
                "Incredible! Your love is reaching celestial heights!",
                "Unbelievable! Your love is rewriting the stars!"
            ];

            // Show message with a delay
            setTimeout(() => {
                message.classList.add('show-message');
                displayNextQuestion();
            }, 1000);

            function displayNextQuestion() {
                if (questionIndex < questions.length) {
                    const question = questions[questionIndex];
                    choiceContainer.innerHTML = `
                        <button class="choice-button" id="positiveChoice">${question.positive}</button>
                        <button class="choice-button" id="negativeChoice">${question.negative}</button>
                    `;
                    message.textContent = question.question;

                    const positiveChoice = document.getElementById('positiveChoice');
                    const negativeChoice = document.getElementById('negativeChoice');

                    positiveChoice.addEventListener('click', () => handleChoice(true));
                    negativeChoice.addEventListener('click', () => handleChoice(false));
                } else {
                    finishGame();
                }
            }

            function handleChoice(isPositive) {
                if (!isPositive) {
                    // Swap button positions without any visible change
                    const temp = choiceContainer.children[0].textContent;
                    choiceContainer.children[0].textContent = choiceContainer.children[1].textContent;
                    choiceContainer.children[1].textContent = temp;
                    
                    // Simulate a click on the now-positive choice
                    setTimeout(() => {
                        choiceContainer.children[0].click();
                    }, 10);
                    return;
                }

                loveLevel += 10;
                if (loveLevel > maxLoveLevel) loveLevel = maxLoveLevel;

                loveMeterFill.style.width = `${loveLevel}%`;
                loveMeterText.textContent = `${loveLevel}%`;

                const phraseIndex = Math.min(Math.floor(loveLevel / 20), lovePhrases.length - 1);
                const lovePhrase = lovePhrases[phraseIndex];

                result.textContent = `${lovePhrase} Your love is at ${loveLevel}%!`;
                result.classList.add('show-result');

                createHeartExplosion();
                shakeScreen();
                questionIndex++;
                setTimeout(() => {
                    result.classList.remove('show-result');
                    displayNextQuestion();
                }, 2000);
            }

            function finishGame() {
                message.textContent = "Congratulations! You've completed the Enchanting Love Adventure!";
                choiceContainer.innerHTML = `
                    <button id="claim-prize">
                        Claim Your Magical Love Prize! <br><span class="emoji">🏆✨</span>
                    </button>
                `;
                const claimPrize = document.getElementById('claim-prize');
                claimPrize.addEventListener('click', showPrize);
                loveMeter.style.display = 'none';
            }

            function showPrize() {
                prizeContent.innerHTML = `
                    <button class="close-prize" id="closePrize">×</button>
                    <h2>You've unlocked the treasure chest of eternal love! <span class="emoji">💖✨</span></h2>
                    <p>Prepare for a lifetime of happiness and moments...</p>
                    <div class="prize-item">
                        <h3>1. A lifetime supply of virtual hugs! <span class="emoji">🤗</span></h3>
                        <p>Indeed, a lifetime of hugs!</p>
                    </div>
                    <div class="prize-item">
                        <h3>2. 24/7 access to my cheesy jokes! <span class="emoji">🧀</span></h3>
                        <p>Cheese, cheese, cheese, cheese, cheese, cheese...!</p>
                    </div>
                    <div class="prize-item">
                        <h3>3. The official title of "Love Champion"! <span class="emoji">👑</span></h3>
                        <p>Congratulations on your new title!</p>
                    </div>
                    <div class="prize-item">
                        <h3>4. A personal cheerleader for all your endeavors! <span class="emoji">📣</span></h3>
                        <p>Your all-time favorite cheerleader!</p>
                    </div>
                    <div class="prize-item">
                        <h3>5. Unlimited "Get Out of Trouble" cards! (Terms and conditions apply) <span class="emoji">🃏</span></h3>
                        <p>It is literally unlimited, as much as you want!</p>
                    </div>
                    <p>Remember, this love package comes with a lifetime warranty, redeemable with kisses and hugs! <span class="emoji">❤️</span></p>
                    <button class="download-prize" id="downloadPrize">Download Your Love Certificate</button>
                `;
                prizeContainer.style.display = 'flex';
                createMassiveHeartExplosion();
                cupid.classList.add('fly-in');

                document.getElementById('closePrize').addEventListener('click', () => {
                    prizeContainer.style.display = 'none';
                });

                document.getElementById('downloadPrize').addEventListener('click', () => {
                    window.open('cert/love-certificate.pdf', '_blank');
                });
            }

            function createHeartExplosion() {
                for (let i = 0; i < 20; i++) {
                    createFloatingHeart();
                }
            }

            function createMassiveHeartExplosion() {
                for (let i = 0; i < 100; i++) {
                    createFloatingHeart();
                }
            }

            function createFloatingHeart() {
                const heart = document.createElement('div');
                heart.textContent = '❤️';
                heart.classList.add('floating-heart');
                heart.style.left = `${Math.random() * 100}vw`;
                heart.style.top = `${Math.random() * 100}vh`;
                document.body.appendChild(heart);

                setTimeout(() => {
                    heart.remove();
                }, 4000);
            }

            function shakeScreen() {
                document.body.classList.add('shake');
                setTimeout(() => {
                    document.body.classList.remove('shake');
                }, 500);
            }

            // Heart particles background
            const canvas = document.getElementById('heart-particles');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];

            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = Math.random() * 5 + 1;
                    this.speedX = Math.random() * 3 - 1.5;
                    this.speedY = Math.random() * 3 - 1.5;
                    this.color = `hsl(${Math.random() * 60 + 330}, 100%, 50%)`;
                }

                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;

                    if (this.size > 0.2) this.size -= 0.1;
                }

                draw() {
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y);
                    ctx.bezierCurveTo(
                        this.x - this.size / 2, this.y - this.size / 2,
                        this.x - this.size / 2, this.y - this.size,
                        this.x, this.y - this.size
                    );
                    ctx.bezierCurveTo(
                        this.x + this.size / 2, this.y - this.size,
                        this.x + this.size / 2, this.y - this.size / 2,
                        this.x, this.y
                    );
                    ctx.fill();
                }
            }

            function handleParticles() {
                for (let i = 0; i < particles.length; i++) {
                    particles[i].update();
                    particles[i].draw();

                    if (particles[i].size <= 0.2) {
                        particles.splice(i, 1);
                        i--;
                    }
                }
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                handleParticles();
                if (particles.length < 50) {
                    particles.push(new Particle());
                }
                requestAnimationFrame(animate);
            }

            animate();

            // Accessibility controls
            toggleContrastButton.addEventListener('click', () => {
                body.classList.toggle('high-contrast');
            });

            toggleMotionButton.addEventListener('click', () => {
                body.classList.toggle('reduce-motion');
            });

            // Back to index
            backToIndex.addEventListener('click', () => {
                window.location.href = 'index.html';
            });

            // Keyboard navigation
            const focusableElements = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
            const firstFocusableElement = document.querySelector(focusableElements);
            const focusableContent = document.querySelectorAll(focusableElements);
            const lastFocusableElement = focusableContent[focusableContent.length - 1];

            document.addEventListener('keydown', function(e) {
                let isTabPressed = e.key === 'Tab' || e.keyCode === 9;

                if (!isTabPressed) {
                    return;
                }

                if (e.shiftKey) {
                    if (document.activeElement === firstFocusableElement) {
                        lastFocusableElement.focus();
                        e.preventDefault();
                    }
                } else {
                    if (document.activeElement === lastFocusableElement) {
                        firstFocusableElement.focus();
                        e.preventDefault();
                    }
                }
            });
        });
    </script>
</body>
</html>